apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
    compile ivyDependencies('compile')
    testCompile ivyDependencies('test')
}

/**
 * Read dependencies from Ivy XML
 */
def ivyDependencies(conf) {
    return new XmlParser().parse(file('ivy.xml')).dependencies.dependency.stream()
            .filter { it.@conf == null || it.@conf == conf }
            .map { it.@org + ':' + it.@name + ':' + it.@rev }
            .collect()
}
